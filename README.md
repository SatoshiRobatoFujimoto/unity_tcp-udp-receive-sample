# unity_tcp-udp-receive-sample

Unity上でTCP/IPおよびUDP/IPのメッセージを受信するサンプルプログラムです。
TCP/IPやUDP/IPのメッセージを受信するたびに、キューブが回転します。

<img src="https://camo.githubusercontent.com/92bd0382f153eda05b8921a50a687325b292951b/687474703a2f2f73617a616d656b692e6a702f74656d702f756e6974795f7463702d7564702d726563656976652d73616d706c655f73637265656e73686f742e706e67" width="400px">

## TCPの受信部について

TCP/IPの受信コア部はTCPReceiver.csです。TCPReceiverスクリプトをEmpty Objectに追加することで、TCPサーバを起動して利用できます。デフォルトのポート番号は12345に設定されていますが、Unityエディタで「TCP Receiver」オブジェクトを選択して、インスペクタから変更できます。

受信したメッセージの管理部分については、GameManager.csを参照してください。[MethodImpl(MethodImplOptions.Synchronized)] というアノテーションを使用した同期手法を使用して、メインスレッドとTCPの受信用スレッドの両方からメッセージ格納用のキューにアクセスしています。

## UDPの受信部について

UDP/IPの受信コア部はUDPReceiver.csです。UDPReceiverスクリプトをEmpty Objectに追加することで、UDPサーバを起動して利用できます。デフォルトのポート番号は22222に設定されていますが、Unityエディタで「UDP Receiver」オブジェクトを選択して、インスペクタから変更できます。

受信したメッセージの管理部分については、GameManager.csを参照してください。[MethodImpl(MethodImplOptions.Synchronized)] というアノテーションを使用した同期手法を使用して、メインスレッドとUDP/IPの受信用スレッドの両方からメッセージ格納用のキューにアクセスしています。
